# 要件定義書

## Who’s Up

### 空気（Who’s up?）を可視化する Discord Bot

---

## 1. 概要

### 1.1 プロダクト概要

Who’s Up は、固定曜日や仕切り役を置かない Discord サーバーにおいて、  
**「今この後／先のある時間で、どれくらい人が集まりそうか」**を  
質問や調整なしで可視化する Bot である。

イベント管理・出欠確認・予定確定は行わず、  
**“集まれる気配”を一瞬で伝えること**に特化する。

> 決める Bot ではない。  
> 空気を可視化する Bot。

---

## 2. 背景と課題

### 2.1 想定されるサーバー状況

- 小〜中規模（10〜30 人）の Discord サーバー
- VC 常連は 5〜10 人程度
- 固定の開催日・管理者・ホストが存在しない
- 海外メンバー混在による時差

### 2.2 ユーザー課題

- 誰が今起きている／来られるかわからない
- 「今日やる？」と聞く心理的コストが高い
- VC を立てても誰も来ない不安
- 結果として、遊べたはずの機会が流れる

**本質的な課題は「日程調整」ではなく「可視性不足」である。**

---

## 3. コンセプトと設計思想

### 3.1 コアコンセプト

- 質問しない
- 圧をかけない
- 決定しない

Bot は意思決定を代行せず、  
**人が動きやすくなる状態だけを提示する。**

### 3.2 UX 方針

- 直感的
- 低摩擦（誰でも使える）
- 非同期・非侵襲

---

## 4. ターゲットユーザー

- アクティブ 10〜30 人の Discord サーバー
- VC 常連 5〜10 人
- 固定イベントが存在しない
- 時差あり・海外メンバー混在
- 「暇な人」起点で自然に集まりたいコミュニティ

---

## 5. 機能要件（Phase 1）

### 5.1 対応コマンド

| コマンド | 目的                           | 自動クローズ |
| -------- | ------------------------------ | ------------ |
| `/soon`  | この後どう？（時間指定なし）   | 30 分        |
| `/later` | 先の予定の気配確認（日時必須） | 24 時間      |

---

### 5.2 コマンド仕様

| 項目        | 内容                                                                 |
| ----------- | -------------------------------------------------------------------- |
| `/soon`     | 今〜少し先の空気を聞く                                               |
| `/later`    | 日時を選択して先の気配を聞く                                         |
| パラメータ  | `/soon`: `[min_players]` `[game]`<br>`/later`: `[min_players]` `[game]` |
| min_players | デフォルト 3                                                         |
| game        | 表示用テキスト、省略可                                               |
| 実行権限    | 全ユーザー                                                           |
| 言語        | 英語のみ                                                             |

#### `/later` の日時選択フロー

1. コマンド実行後、日付選択メニューを表示（今後7日間）
2. 日付選択後、時間選択メニューを表示（1時間刻み）
3. 時間選択後、タイムゾーン選択メニューを表示
4. 選択完了後、ポールを投稿

時刻は Discord タイムスタンプ形式（`<t:UNIX:f>`）で表示され、
閲覧者のローカル時間に自動変換される。

---

### 5.3 投票仕様

- リアクション投票
- 選択肢は全コマンド共通
  - 🟢 I can join
  - 🟡 Maybe
  - 🟠 Can't
- 排他制御（1 ユーザー 1 票）
- 投票変更時は前回リアクションを自動解除

---

### 5.4 表示フォーマット

#### `/soon`

```
🎮 [game] — anyone up?

🟢 I can join (0)
🟡 Maybe (0)
🟠 Can't (0)

⏳ Closes in 30 min
```

#### `/later`

```
🎮 [game] @ <t:UNIX:f> — anyone around?

🟢 I can join (0)
🟡 Maybe (0)
🟠 Can't (0)

⏳ Closes in 24h
```

※ `<t:UNIX:f>` は Discord のタイムスタンプ形式。閲覧者のローカル時間で表示される。

---

### 5.5 閾値通知

- `min_players` に達したとき投稿者に DM 通知
- メッセージ例: `4 people might be around.`
- 通知は 1 回のみ

---

### 5.6 自動クローズ

| コマンド | クローズまでの時間 |
| -------- | ------------------ |
| `/soon`  | 30 分              |
| `/later` | 24 時間            |

- クローズ時はメッセージを編集し「Closed」と表示
- リアクションは非活性化

---

## 6. ブランドボイス

### 6.1 Bot のキャラクター

| 項目         | 内容                                   |
| ------------ | -------------------------------------- |
| 名前         | Who's Up                               |
| キャッチコピー | See who's around — without asking.     |
| 役割         | 空気（Who's up?）をそっと可視化する観測者 |
| 性格         | 控えめ・中立・落ち着いている           |
| 立ち位置     | 仕切らない、横にいる存在               |
| トーン       | 静か・フレンドリー・非侵襲             |

**設計思想**

Who's Up は会話を主導しない。
質問・催促・決定を行わず、人が動くための状態だけを提示する。

---

### 6.2 自己紹介文（Discord Developer Portal）

**About Me（メイン）**

> I quietly show who might be around to play — now or later.
> No scheduling. No pressure.

**Short Description（一覧・補足）**

> See the vibe before you ask.

**Detailed Description（表示される場合）**

> Who's Up helps small Discord servers see who might be around to play.
> It doesn't schedule events or ask people directly — it just shows the current vibe.
>
> Use it when you're not sure if anyone's up.

---

### 6.3 メッセージスタイルガイド

| 場面           | スタイル               | 例                                       |
| -------------- | ---------------------- | ---------------------------------------- |
| コマンド実行時 | 簡潔・中立・事実のみ   | 🎮 Valorant — anyone up?                 |
| 投票表示       | 状態中心・感情表現なし | 🟢 I can join (3)                        |
| 自動クローズ   | 静か・通知最小限       | ⏳ Closes in 30 min                      |
| 閾値到達       | 控えめ・投稿者のみ通知 | 4 people might be around.                |
| エラー         | 丁寧・落ち着いた案内   | Something went wrong. Please try again.  |
| キャンセル     | 短く事実のみ           | This check was cancelled.                |

**原則**

- 感嘆符は使わない、もしくは最小限
- 判断・評価・煽り表現をしない
- 「参加しよう」「集まろう」と誘導しない

---

### 6.4 絵文字の使い方

**使用する絵文字（限定）**

🎮 ⏳ 🟢 🟡 🟠

**使用しないもの**

- 過度な装飾絵文字
- 感情表現の強い絵文字
- 複数連続使用

**運用ルール**

- 1 メッセージにつき最大 1 個
- 見出し・区切り目的のみ
- 本文の可読性を最優先
